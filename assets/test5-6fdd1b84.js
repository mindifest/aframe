import"./test1-3cfb730f.js";import{L,F as E,ag as j,ah as C,ab as T,z as k,a9 as R,h as v,d as y,M as g,u as m,ai as S,q as M,aa as O,af as z,V as H,ac as B}from"./VRButton-ed1825e9.js";import{p as G}from"./bht_01-de6b8ce2.js";class A extends L{constructor(t){super(t)}load(t,e,n,i){const o=this,r=new E(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,function(h){const d=o.parse(JSON.parse(h));e&&e(d)},n,i)}parse(t){return new F(t)}}class F{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],i=W(t,e,this.data);for(let o=0,r=i.length;o<r;o++)n.push(...i[o].toShapes());return n}}function W(s,t,e){const n=Array.from(s),i=t/e.resolution,o=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*i,r=[];let h=0,d=0;for(let l=0;l<n.length;l++){const u=n[l];if(u===`
`)h=0,d-=o;else{const p=_(u,i,h,d,e);h+=p.offsetX,r.push(p.path)}}return r}function _(s,t,e,n,i){const o=i.glyphs[s]||i.glyphs["?"];if(!o){console.error('THREE.Font: character "'+s+'" does not exists in font family '+i.familyName+".");return}const r=new j;let h,d,l,u,p,w,f,b;if(o.o){const a=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let c=0,P=a.length;c<P;)switch(a[c++]){case"m":h=a[c++]*t+e,d=a[c++]*t+n,r.moveTo(h,d);break;case"l":h=a[c++]*t+e,d=a[c++]*t+n,r.lineTo(h,d);break;case"q":l=a[c++]*t+e,u=a[c++]*t+n,p=a[c++]*t+e,w=a[c++]*t+n,r.quadraticCurveTo(p,w,l,u);break;case"b":l=a[c++]*t+e,u=a[c++]*t+n,p=a[c++]*t+e,w=a[c++]*t+n,f=a[c++]*t+e,b=a[c++]*t+n,r.bezierCurveTo(p,w,f,b,l,u);break}}return{offsetX:o.ha*t,path:r}}class q extends C{constructor(t,e={}){const n=e.font;if(n===void 0)super();else{const i=n.generateShapes(t,e.size);e.depth=e.height!==void 0?e.height:50,e.bevelThickness===void 0&&(e.bevelThickness=10),e.bevelSize===void 0&&(e.bevelSize=8),e.bevelEnabled===void 0&&(e.bevelEnabled=!1),super(i,e)}this.type="TextGeometry"}}function I(){const s=new T({antialias:!0});return s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.setAnimationLoop(s),s.useLegacyLights=!1,s.shadowMap.enabled=!0,s.xr.enabled=!0,s}function N(s=50){let t=new k(s,window.innerWidth/window.innerHeight,.1,1e3);return t.position.set(0,0,.1),t}function V(s){var t=new R(500,60,40);t.scale(-1,1,1);var e=new v().load(s);e.colorSpace=y;var n=new g({map:e});return new m(t,n)}function D(s,t){let e=s.material.map.image.src,n,i=e.match(/_([0-9]{2})\.jpg/),o=parseInt(i[1]),r;o==t?n=1:n=o+1,n="_"+n.toString().padStart(2,"0")+".jpg";let h=e.replace(i[0],n);r=new v().load(h),r.colorSpace=y,s.material.map=r,s.material.needsUpdate=!0}function J(){const s=new S(1.2,.7,6,17),t=new g({color:0,side:M,transparent:!0,opacity:.4});let e=new m(s,t);return e.position.set(0,0,-1),e.lookAt(0,0,0),e}function U(){const s=new A,t=new g({color:16777215});return s.load("node_modules/examples/fonts/helvetiker_bold.typeface.json",function(n){const i=new q("Hello three.js!",{font:n});return new m(i,t)})}const K="/aframe/img/arrow.png";class x extends m{constructor(){super(),this.geometry=new S(.2,.2);const t=new v().load(K);this.material=new g({map:t,transparent:!0}),this.cubeActive=!1}onPointerOver(t){this.material.color.set("hotpink"),this.material.color.convertSRGBToLinear(),console.log("hover in")}onPointerOut(t){this.material.color.set("orange"),this.material.color.convertSRGBToLinear(),console.log("hover out")}onClick(t){this.cubeActive=!this.cubeActive,console.log("click")}}class Q{constructor(){this.intersects=[],this.width=window.innerWidth,this.height=window.innerHeight,this.container=document.getElementById("pano"),this.camera=N(50),this.scene=new O,this.hovered={},this.triggerPressed=!1,this.scenes=2,this.raycaster=new z,this.mouse=new H,this.renderer=I(),this.container.appendChild(this.renderer.domElement),this.container.appendChild(B.createButton(this.renderer)),this.pano=V(G),this.scene.add(this.pano),this.navigation=J(),this.scene.add(this.navigation),this.text=U(),this.scene.add(this.text),this.setControls(),this.setHotspots(),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.renderer.setAnimationLoop(this.render.bind(this))}render(){this.renderer.render(this.scene,this.camera)}onWindowResize(){this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height),this.renderer.render(this.scene,this.camera)}setControls(){const t=o=>{this.triggerPressed||D(this.pano,this.scenes)},e=o=>{this.triggerPressed=!1},n=this.renderer.xr.getController(0);n.addEventListener("selectstart",t),n.addEventListener("selectend",e),this.scene.add(n);const i=this.renderer.xr.getController(1);i.addEventListener("selectstart",t),i.addEventListener("selectend",e),this.scene.add(i)}setHotspots(){const t=new x;t.position.set(1,0,-3),this.scene.add(t);const e=new x;e.position.set(-2,0,-3),this.scene.add(e)}events(){window.addEventListener("pointermove",t=>{this.mouse.set(t.clientX/this.width*2-1,-(t.clientY/this.height)*2+1),this.raycaster.setFromCamera(this.mouse,this.camera),this.intersects=this.raycaster.intersectObjects(this.scene.children,!0),Object.keys(this.hovered).forEach(e=>{if(this.intersects.find(i=>i.object.uuid===e)===void 0){const i=this.hovered[e];i.object.onPointerOver&&i.object.onPointerOut(i),delete this.hovered[e]}}),this.intersects.forEach(e=>{this.hovered[e.object.uuid]||(this.hovered[e.object.uuid]=e,e.object.onPointerOver&&e.object.onPointerOver(e)),e.object.onPointerMove&&e.object.onPointerMove(e)})}),window.addEventListener("click",t=>{this.intersects.forEach(e=>{e.object.onClick&&e.object.onClick(e)})})}}window.addEventListener("DOMContentLoaded",()=>{new Q});
